<% include ../partials/header %>

  <% include ../partials/question %>
    <% include ../partials/modal %>

      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
      <script type="text/javascript">
        $(document).ready(function() {
          //submit form
          $("#submit").on('click', function(event) {

            //check for name and image
            if ($("#userName").val() === '' || $("#userImage").val() === '') {
              event.preventDefault();
              alert("Some required fields are empty!");
            } else {
              event.preventDefault();

              //grab user input
              let Inputs = {
                name: $("#userName").val().trim(),
                image: $("#userImage").val().trim(),
                scores: [
                  $("#question1").val(),
                  $("#question2").val(),
                  $("#question3").val(),
                  $("#question4").val(),
                  $("#question5").val(),
                  $("#question6").val(),
                  $("#question7").val(),
                  $("#question8").val(),
                  $("#question9").val(),
                  $("#question10").val()
                ]
              };
              console.log(Inputs);
              //post user to user data
              $.post('api/users', Inputs).then(function(data) {
                //show modal and display matched character
                $("#charMatch").text(data.matchName);
                $("#charMatchImage").attr('src', data.matchImage);
                $("#modal1").show();
              })
            }
          })

        });
      </script>
      <% include ../partials/footer %>
